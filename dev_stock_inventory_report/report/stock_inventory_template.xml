<?xml version="1.0" encoding="UTF-8"?>
<openerp>
	<data>
		<template id="stock_inventory_template">
			<t t-call="web.html_container">
				<t t-as="warehouse_id" t-foreach="get_warehouse_data">
					<t t-call="web.internal_layout">
						<div class="page" style="font-size:10px;color:#000">
							<style>
							    .header_table{
							        width:100%;
							        table-layout:fixed;
							    }
							    .header_table th{
								    padding:5px;
								    text-align:center;
								    border:1px solid black;
								    background:#c8cace;
								}
								.header_table td{
								    padding:5px;
								    text-align:center;
								    border:1px solid black;
								}
								.my_table{
								    width:100%;
                                    table-layout:fixed;
								}
								.my_table th{
								    padding:5px;
                                    text-align:center;
                                    vertical-align:middle;
                                    border:1px solid black;
								}
								.my_table td{
								    padding:5px;
								    border-bottom:1px solid #efefef;
								}
							</style>
							<div class="row">
								<center>
									<h3>STOCK INVENTORY</h3>
								</center>
								<br />
							</div>
							<div class="row">
								<table class="header_table">
									<thead>
										<tr>
											<th> Company</th>
											<th> Warehouse</th>
											<th> Location</th>
											<th> Date</th>
											<th> Generated By</th>
											<th> Generated Date</th>
										</tr>
									</thead>
									<tbody class="sale_tbody">
										<tr>
											<td>
												<span t-esc="get_wizard_data.company_id.name" />
											</td>
											<td>
												<span t-esc="warehouse_id.name" />
											</td>
											<td>
											    <t t-if="get_wizard_data.location_ids">
	                                                <t t-foreach="get_wizard_data.get_location(warehouse_id)" t-as="location_id">
	                                                    <div style="display:block;" t-esc="location_id.name_get()[0][1]" />
	                                                </t>
											    </t>
											</td>
											<td>
												<span t-esc="get_wizard_data.start_date" />
												To
												<span t-esc="get_wizard_data.end_date" />
											</td>
											<td>
												<span t-esc="user.name" />
											</td>
											<td>
												<span t-esc="time.strftime('%d-%m-%Y %H:%M:%S')" />
											</td>
										</tr>
									</tbody>
								</table>
							</div>
							<div class="row mt32 mb32" />
							<div class="row">
								<table class="my_table">
									<thead>
										<tr>
											<th rowspan="2" style="background:#d6d6d6;width:200px;">Product</th>
                                            <th rowspan="2" style="background:#d6d6d6;width:50px;">UoM</th>
                                            <th rowspan="2" style="background:#d6d6d6">Unit Cost</th>
                                            <th rowspan="2" style="background:#d6d6d6">Avg Price</th>
											<th rowspan="2" style="background:#d6d6d6">Beginning</th>
											<th colspan="2" style="background:#d6d6d6">Sale</th>
											<th colspan="2" style="background:#d6d6d6">Purchase</th>
                                            <th colspan="2" style="background:#d6d6d6">W/H Transfer</th>
											<th colspan="2" style="background:#d6d6d6">Internal</th>
											<th colspan="2" style="background:#d6d6d6">Manufactured</th>
											<th colspan="2" style="background:#d6d6d6">Adjustment</th>
											<th rowspan="2" style="background:#d6d6d6">Ending</th>
										</tr>
                                        <tr>
                                            <th style="background:#d6d6d6">Delivered</th>
                                            <th style="background:#d6d6d6">Returned</th>
                                            <th style="background:#d6d6d6">Received</th>
                                            <th style="background:#d6d6d6">Returned</th>
                                            <th style="background:#d6d6d6">In</th>
                                            <th style="background:#d6d6d6">Out</th>
                                            <th style="background:#d6d6d6">In</th>
                                            <th style="background:#d6d6d6">Out</th>
                                            <th style="background:#d6d6d6">Consumed</th>
                                            <th style="background:#d6d6d6">Produced</th>
                                            <th style="background:#d6d6d6">Opname</th>
                                            <th style="background:#d6d6d6">Scrap</th>
                                        </tr>
									</thead>
									<tbody class="sale_tbody">
										<t t-set="lines" t-value="get_lines[warehouse_id.id]" />
										<t t-if="not get_wizard_data.is_group_by_category">
											<t t-set="b_qty" t-value="0" />
											<t t-set="s1_qty" t-value="0" />
											<t t-set="s2_qty" t-value="0" />
											<t t-set="p1_qty" t-value="0" />
                                            <t t-set="p2_qty" t-value="0" />
                                            <t t-set="w1_qty" t-value="0" />
                                            <t t-set="w2_qty" t-value="0" />
											<t t-set="i1_qty" t-value="0" />
                                            <t t-set="i2_qty" t-value="0" />
											<t t-set="m1_qty" t-value="0" />
                                            <t t-set="m2_qty" t-value="0" />
											<t t-set="a_qty" t-value="0" />
                                            <t t-set="sc_qty" t-value="0" />
											<t t-set="e_qty" t-value="0" />
											<t t-as="line" t-foreach="lines">
												<t t-set="b_qty" t-value="b_qty + line.get('beginning_qty')" />
                                                <t t-set="s1_qty" t-value="s1_qty + line.get('delivered_sale_qty')" />
                                                <t t-set="s2_qty" t-value="s2_qty + line.get('received_sale_qty')" />
                                                <t t-set="p1_qty" t-value="p1_qty + line.get('received_purchase_qty')" />
                                                <t t-set="p2_qty" t-value="p2_qty + line.get('delivered_purchase_qty')" />
                                                <t t-set="w1_qty" t-value="w1_qty + line.get('received_qty')" />
                                                <t t-set="w2_qty" t-value="w2_qty + line.get('delivered_qty')" />
												<t t-set="i1_qty" t-value="i1_qty + line.get('internal_qty_pos')" />
                                                <t t-set="i2_qty" t-value="i2_qty + line.get('internal_qty_neg')" />
												<t t-set="m1_qty" t-value="m1_qty + line.get('mrp_qty_neg')" />
                                                <t t-set="m2_qty" t-value="m2_qty + line.get('mrp_qty_pos')" />
												<t t-set="a_qty" t-value="a_qty + line.get('adjust_qty')" />
                                                <t t-set="sc_qty" t-value="sc_qty + line.get('scrap_qty')" />
												<t t-set="e_qty" t-value="e_qty + line.get('ending_qty')" />
												<tr style="page-break-inside: avoid">
													<td class="text-left">
														<a t-att="{'href':'#id=%s&amp;action=%s&amp;model=product.product&amp;view_type=form'%(line.get('product_id'),line.get('product_action_id'))}" t-esc="line.get('product')" />
													</td>
                                                    <td class="text-center">
                                                        <span t-esc="line.get('uom')" />
                                                    </td>
                                                    <td class="text-right">
                                                        <span t-esc="'{:,.2f}'.format(line.get('unit_cost'))" />
                                                    </td>
                                                    <td class="text-right">
                                                        <span t-esc="'{:,.2f}'.format(line.get('avg_price'))" />
                                                    </td>
													<td class="text-right">
														<span t-esc="'{:,.2f}'.format(line.get('beginning_qty'))" />
													</td>
                                                    <td class="text-right">
                                                        <span t-esc="'{:,.2f}'.format(line.get('delivered_sale_qty'))" />
                                                    </td>
                                                    <td class="text-right">
                                                        <span t-esc="'{:,.2f}'.format(line.get('received_sale_qty'))" />
                                                    </td>
                                                    <td class="text-right">
                                                        <span t-esc="'{:,.2f}'.format(line.get('received_purchase_qty'))" />
                                                    </td>
                                                    <td class="text-right">
                                                        <span t-esc="'{:,.2f}'.format(line.get('delivered_purchase_qty'))" />
                                                    </td>
                                                    <td class="text-right">
                                                        <span t-esc="'{:,.2f}'.format(line.get('received_qty'))" />
                                                    </td>
                                                    <td class="text-right">
                                                        <span t-esc="'{:,.2f}'.format(line.get('delivered_qty'))" />
                                                    </td>
													<td class="text-right">
														<span t-esc="'{:,.2f}'.format(line.get('internal_qty_pos'))" />
													</td>
                                                    <td class="text-right">
                                                        <span t-esc="'{:,.2f}'.format(line.get('internal_qty_neg'))" />
                                                    </td>
													<td class="text-right">
														<span t-esc="'{:,.2f}'.format(line.get('mrp_qty_neg'))" />
													</td>
                                                    <td class="text-right">
                                                        <span t-esc="'{:,.2f}'.format(line.get('mrp_qty_pos'))" />
                                                    </td>
													<td class="text-right">
														<span t-esc="'{:,.2f}'.format(line.get('adjust_qty'))" />
													</td>
                                                    <td class="text-right">
                                                        <span t-esc="'{:,.2f}'.format(line.get('scrap_qty'))" />
                                                    </td>
													<td class="text-right">
														<span t-esc="'{:,.2f}'.format(line.get('ending_qty'))" />
													</td>
												</tr>
											</t>
											<tr style="page-break-inside: avoid">
												<td colspan="4">
													<b>Total</b>
												</td>
												<td class="text-right">
													<b>
														<span t-esc="'{:,.2f}'.format(b_qty)" />
													</b>
												</td>
                                                <td class="text-right">
                                                    <b>
                                                        <span t-esc="'{:,.2f}'.format(s1_qty)" />
                                                    </b>
                                                </td>
                                                <td class="text-right">
                                                    <b>
                                                        <span t-esc="'{:,.2f}'.format(s2_qty)" />
                                                    </b>
                                                </td>
                                                <td class="text-right">
                                                    <b>
                                                        <span t-esc="'{:,.2f}'.format(p1_qty)" />
                                                    </b>
                                                </td>
                                                <td class="text-right">
                                                    <b>
                                                        <span t-esc="'{:,.2f}'.format(p2_qty)" />
                                                    </b>
                                                </td>
                                                <td class="text-right">
                                                    <b>
                                                        <span t-esc="'{:,.2f}'.format(w1_qty)" />
                                                    </b>
                                                </td>
                                                <td class="text-right">
                                                    <b>
                                                        <span t-esc="'{:,.2f}'.format(w2_qty)" />
                                                    </b>
                                                </td>
												<td class="text-right">
													<b>
														<span t-esc="'{:,.2f}'.format(i1_qty)" />
													</b>
												</td>
                                                <td class="text-right">
                                                    <b>
                                                        <span t-esc="'{:,.2f}'.format(i2_qty)" />
                                                    </b>
                                                </td>
												<td class="text-right">
													<b>
														<span t-esc="'{:,.2f}'.format(m1_qty)" />
													</b>
												</td>
                                                <td class="text-right">
                                                    <b>
                                                        <span t-esc="'{:,.2f}'.format(m2_qty)" />
                                                    </b>
                                                </td>
												<td class="text-right">
													<b>
														<span t-esc="'{:,.2f}'.format(a_qty)" />
													</b>
												</td>
                                                <td class="text-right">
                                                    <b>
                                                        <span t-esc="'{:,.2f}'.format(sc_qty)" />
                                                    </b>
                                                </td>
												<td class="text-right">
													<b>
														<span t-esc="'{:,.2f}'.format(e_qty)" />
													</b>
												</td>
											</tr>
										</t>
										<t t-if="get_wizard_data.is_group_by_category">
											<t t-set="lines" t-value="group_by_lines" />
											<t t-as="l_val" t-foreach="lines">
												<tr style="page-break-inside: avoid">
													<td colspan="7"
														style="background:#d6d6d6;border-top:1px solid black;border-bottom:1px solid black;">
														<span t-esc="l_val.get('category')" />
													</td>
												</tr>
												<t t-set="b_qty" t-value="0" />
												<t t-set="s1_qty" t-value="0" />
                                                <t t-set="s2_qty" t-value="0" />
                                                <t t-set="p1_qty" t-value="0" />
                                                <t t-set="p2_qty" t-value="0" />
                                                <t t-set="w1_qty" t-value="0" />
                                                <t t-set="w2_qty" t-value="0" />
												<t t-set="i1_qty" t-value="0" />
                                                <t t-set="i2_qty" t-value="0" />
												<t t-set="m1_qty" t-value="0" />
                                                <t t-set="m2_qty" t-value="0" />
												<t t-set="a_qty" t-value="0" />
                                                <t t-set="sc_qty" t-value="0" />
												<t t-set="e_qty" t-value="0" />
												<t t-as="line" t-foreach="l_val.get('values')">
													<t t-set="b_qty" t-value="b_qty + line.get('beginning_qty')" />
													<t t-set="s1_qty" t-value="s1_qty + line.get('delivered_sale_qty')" />
                                                    <t t-set="s2_qty" t-value="s2_qty + line.get('received_sale_qty')" />
                                                    <t t-set="p1_qty" t-value="p1_qty + line.get('received_purchase_qty')" />
                                                    <t t-set="p2_qty" t-value="p2_qty + line.get('delivered_purchase_qty')" />
                                                    <t t-set="w1_qty" t-value="w1_qty + line.get('received_qty')" />
                                                    <t t-set="w2_qty" t-value="w2_qty + line.get('delivered_qty')" />
													<t t-set="i1_qty" t-value="i1_qty + line.get('internal_qty_pos')" />
                                                    <t t-set="i2_qty" t-value="i2_qty + line.get('internal_qty_neg')" />
													<t t-set="m1_qty" t-value="m1_qty + line.get('mrp_qty_neg')" />
                                                    <t t-set="m2_qty" t-value="m2_qty + line.get('mrp_qty_pos')" />
													<t t-set="a_qty" t-value="a_qty + line.get('adjust_qty')" />
                                                    <t t-set="sc_qty" t-value="sc_qty + line.get('scrap_qty')" />
													<t t-set="e_qty" t-value="e_qty + line.get('ending_qty')" />
													<tr style="page-break-inside: avoid">
														<td class="text-left">
															<a t-att="{'href':'#id=%s&amp;action=%s&amp;model=product.product&amp;view_type=form'%(line.get('product_id'),line.get('product_action_id'))}" t-esc="line.get('product')" />
														</td>
                                                        <td class="text-center">
                                                            <span t-esc="line.get('uom')" />
                                                        </td>
                                                        <td class="text-right">
                                                            <span t-esc="'{:,.2f}'.format(line.get('unit_cost'))" />
                                                        </td>
                                                        <td class="text-right">
                                                            <span t-esc="'{:,.2f}'.format(line.get('avg_price'))" />
                                                        </td>
														<td class="text-right">
															<span t-esc="'{:,.2f}'.format(line.get('beginning_qty'))" />
														</td>
                                                        <td class="text-right">
                                                            <span t-esc="'{:,.2f}'.format(line.get('delivered_sale_qty'))" />
                                                        </td>
                                                        <td class="text-right">
                                                            <span t-esc="'{:,.2f}'.format(line.get('received_sale_qty'))" />
                                                        </td>
                                                        <td class="text-right">
                                                            <span t-esc="'{:,.2f}'.format(line.get('received_purchase_qty'))" />
                                                        </td>
                                                        <td class="text-right">
                                                            <span t-esc="'{:,.2f}'.format(line.get('delivered_purchase_qty'))" />
                                                        </td>
                                                        <td class="text-right">
                                                            <span t-esc="'{:,.2f}'.format(line.get('received_qty'))" />
                                                        </td>
                                                        <td class="text-right">
                                                            <span t-esc="'{:,.2f}'.format(line.get('delivered_qty'))" />
                                                        </td>
														<td class="text-right">
															<span t-esc="'{:,.2f}'.format(line.get('internal_qty_pos'))" />
														</td>
                                                        <td class="text-right">
                                                            <span t-esc="'{:,.2f}'.format(line.get('internal_qty_neg'))" />
                                                        </td>
														<td class="text-right">
															<span t-esc="'{:,.2f}'.format(line.get('mrp_qty_neg'))" />
														</td>
                                                        <td class="text-right">
                                                            <span t-esc="'{:,.2f}'.format(line.get('mrp_qty_pos'))" />
                                                        </td>
														<td class="text-right">
															<span t-esc="'{:,.2f}'.format(line.get('adjust_qty'))" />
														</td>
                                                        <td class="text-right">
                                                            <span t-esc="'{:,.2f}'.format(line.get('scrap_qty'))" />
                                                        </td>
														<td class="text-right">
															<span t-esc="'{:,.2f}'.format(line.get('ending_qty'))" />
														</td>
													</tr>
												</t>
												<tr style="page-break-inside: avoid">
													<td colspan="4"
														style="border-bottom:1px solid black;border-top:1px solid black">
														<b>Total</b>
													</td>
													<td class="text-right"
														style="border-bottom:1px solid black;">
														<b>
															<span t-esc="'{:,.2f}'.format(b_qty)" />
														</b>
													</td>
													<td class="text-right">
                                                        <b>
                                                            <span t-esc="'{:,.2f}'.format(s1_qty)" />
                                                        </b>
                                                    </td>
                                                    <td class="text-right">
                                                        <b>
                                                            <span t-esc="'{:,.2f}'.format(s2_qty)" />
                                                        </b>
                                                    </td>
                                                    <td class="text-right">
                                                        <b>
                                                            <span t-esc="'{:,.2f}'.format(p1_qty)" />
                                                        </b>
                                                    </td>
                                                    <td class="text-right">
                                                        <b>
                                                            <span t-esc="'{:,.2f}'.format(p2_qty)" />
                                                        </b>
                                                    </td>
                                                    <td class="text-right">
                                                        <b>
                                                            <span t-esc="'{:,.2f}'.format(w1_qty)" />
                                                        </b>
                                                    </td>
                                                    <td class="text-right">
                                                        <b>
                                                            <span t-esc="'{:,.2f}'.format(w2_qty)" />
                                                        </b>
                                                    </td>
													<td class="text-right"
														style="border-bottom:1px solid black;">
														<b>
															<span t-esc="'{:,.2f}'.format(i1_qty)" />
														</b>
													</td>
                                                    <td class="text-right"
                                                        style="border-bottom:1px solid black;">
                                                        <b>
                                                            <span t-esc="'{:,.2f}'.format(i2_qty)" />
                                                        </b>
                                                    </td>
													<td class="text-right"
														style="border-bottom:1px solid black;">
														<b>
															<span t-esc="'{:,.2f}'.format(m1_qty)" />
														</b>
													</td>
                                                    <td class="text-right"
                                                        style="border-bottom:1px solid black;">
                                                        <b>
                                                            <span t-esc="'{:,.2f}'.format(m2_qty)" />
                                                        </b>
                                                    </td>
													<td class="text-right"
														style="border-bottom:1px solid black;">
														<b>
															<span t-esc="'{:,.2f}'.format(a_qty)" />
														</b>
													</td>
                                                    <td class="text-right"
                                                        style="border-bottom:1px solid black;">
                                                        <b>
                                                            <span t-esc="'{:,.2f}'.format(sc_qty)" />
                                                        </b>
                                                    </td>
													<td class="text-right"
														style="border-bottom:1px solid black;">
														<b>
															<span t-esc="'{:,.2f}'.format(e_qty)" />
														</b>
													</td>
												</tr>
											</t>
										</t>
									</tbody>
								</table>
							</div>
							<p style="page-break-before:always;" />
						</div>
					</t>
				</t>
			</t>
		</template>
	</data>
</openerp>